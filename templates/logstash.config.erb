input {
  http {
    port => 80
  }
}

filter {
  if [headers][request_method] != "POST" {
    # Drop all non-POST requests. Healthchecks happen over HTTP GET,
    # and we don't want those getting into Logstash.
    drop { }
  }
}

output {
    http {
        format => "json"
        content_type => "application/json"
        http_method => "post"
        url => "${SPLUNK_HEC_ENDPOINT_US}"
        headers => {"Authorization" => "Splunk ${SPLUNK_HEC_TOKEN_US}"}
    }
}
